import{d as S,r as _,o as P,a as V,b as i,c as w,e,w as t,f as k,u as a,E as q,g as N,t as z,h as L,i as g,j as U,k as E,l as C,v as G,m as x,n as H,p as J,q as K,s as O,x as Q,y as b,_ as $,z as W,A as r,B as X,F as Y,C as Z,D as ee}from"./index-8092824f.js";import{g as te,p as ae,a as le,b as ne,c as se}from"./api-475c9464.js";const oe=["src"],ce=S({__name:"ImagePanel",props:{name:null,ip:null},setup(o,{expose:p}){const d=o,m=_(""),y=_(!1),u=_(0);P(async()=>{f(),u.value=setInterval(async()=>{f()},1e4)}),V(()=>{clearInterval(u.value)});const f=()=>{te(d.ip).then(n=>{m.value=n,y.value=!1}).catch(n=>{m.value!==""&&(y.value=!0)})},v=async()=>{await ae(d.ip)},h=async()=>{await le(d.ip)};p({play:v,pause:h});const l=(n,s)=>{O.push({path:`/detail/${n}/${s}`})},c=()=>{Q.prompt("请输入要修改的名字","改名",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(({value:n})=>{ne(d.ip,n).then(s=>{b({type:"success",message:"修改成功"})}).catch(s=>{b({type:"error",message:"修改失败"})})}).catch(()=>{b({type:"info",message:"取消修改"})})};return(n,s)=>(i(),w("div",null,[e(a(K),null,{default:t(()=>[k("div",{onClick:s[0]||(s[0]=B=>l(o.name,o.ip))},[e(a(q),{type:"flex"},{default:t(()=>[e(a(N),{class:"video-name"},{default:t(()=>[k("span",null,z(o.name),1),e(a(L))]),_:1}),e(a(N),null,{default:t(()=>[y.value?(i(),g(a(U),{key:1,style:{width:"100%",height:"10vh"},title:"获取预览失败",type:"error"})):(i(),w("img",{style:{width:"100%",height:"10vh"},src:m.value,key:m.value},null,8,oe))]),_:1})]),_:1})]),e(a(L)),e(a(E),{class:"inline-block",type:"primary",onClick:v},{default:t(()=>[e(a(C),null,{default:t(()=>[e(a(G))]),_:1}),x(" 播放 ")]),_:1}),e(a(E),{class:"inline-block",type:"primary",onClick:h},{default:t(()=>[e(a(C),null,{default:t(()=>[e(a(H))]),_:1}),x(" 暂停 ")]),_:1}),e(a(E),{class:"inline-block",type:"primary",onClick:c},{default:t(()=>[e(a(C),null,{default:t(()=>[e(a(J))]),_:1}),x(" 改名")]),_:1})]),_:1})]))}});const re=$(ce,[["__scopeId","data-v-7323b2cc"]]),ie=o=>(Z("data-v-a0ce962e"),o=o(),ee(),o),ue=ie(()=>k("div",{style:{padding:"15px"}}," 播放管理系统 ",-1)),_e={class:"grid-content"},pe=S({__name:"Layout",setup(o){const p=_([]),d=(l,c)=>{if(l){if(p.value.find(n=>n.id===c))return;p.value.push({id:c,el:l})}},m=()=>{p.value.forEach(l=>{l.el.play()})},y=()=>{p.value.forEach(l=>{l.el.pause()})},u=_([]),f=_(0);P(async()=>{h(),f.value=setInterval(async()=>{h()},8e3)}),V(()=>{clearInterval(f.value)});const v=_([]),h=()=>{se().then(l=>{l.sort((c,n)=>c.ipaddress.localeCompare(n.ipaddress)),u.value=l}).catch(l=>{u.value=[]})};return W(u,(l,c)=>{const n=l.map(s=>({ip:s.ipaddress,name:s.name}));v.value=n}),(l,c)=>{const n=r("el-header"),s=r("el-button"),B=r("el-divider"),D=r("el-empty"),M=r("el-col"),R=r("el-row"),T=r("el-main"),A=r("el-container");return i(),g(A,null,{default:t(()=>[e(n,null,{default:t(()=>[ue]),_:1}),e(T,null,{default:t(()=>[e(s,{type:"primary",style:{"margin-bottom":"20px"},onClick:m},{default:t(()=>[x("全部播放")]),_:1}),e(s,{type:"primary",style:{"margin-bottom":"20px"},onClick:y},{default:t(()=>[x("全部暂停")]),_:1}),e(B),u.value.length===0?(i(),g(D,{key:0})):(i(),g(R,{key:1,gutter:20,type:"flex"},{default:t(()=>[(i(!0),w(Y,null,X(v.value,(I,F)=>(i(),g(M,{style:{height:"100%"},xs:24,sm:12,md:8,lg:6,xl:6,key:F},{default:t(()=>[k("div",_e,[e(re,{ref_for:!0,ref:j=>d(j,I.ip),name:I.name,ip:I.ip},null,8,["name","ip"])])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})}}});const ye=$(pe,[["__scopeId","data-v-a0ce962e"]]);export{ye as default};
