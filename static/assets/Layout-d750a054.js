import{d as S,r as p,o as B,a as F,b as i,c as I,e,w as t,f as g,u as l,E as j,g as w,t as q,h as C,i as h,j as M,k as b,l as L,v as T,m as k,n as U,p as G,q as H,_ as N,s as J,x as c,y as K,F as O,z as Q,A as W}from"./index-9e9cec2d.js";import{g as X,p as Y,a as Z,b as ee}from"./api-c6756a56.js";const ae=["src"],te=S({__name:"ImagePanel",props:{name:null,ip:null},setup(o,{expose:u}){const m=o,r=p(""),f=p(!1),_=p(0);B(async()=>{v(),_.value=setInterval(async()=>{v()},1e4)}),F(()=>{clearInterval(_.value)});const v=()=>{X(m.ip).then(n=>{r.value=n,f.value=!1}).catch(n=>{r.value!==""&&(f.value=!0)})},y=async()=>{await Y(m.ip)},a=async()=>{await Z(m.ip)};u({play:y,pause:a});const d=(n,s)=>{H.push({path:`/detail/${n}/${s}`})};return(n,s)=>(i(),I("div",null,[e(l(G),null,{default:t(()=>[g("div",{onClick:s[0]||(s[0]=E=>d(o.name,o.ip))},[e(l(j),{type:"flex"},{default:t(()=>[e(l(w),{class:"video-name"},{default:t(()=>[g("span",null,q(o.name),1),e(l(C))]),_:1}),e(l(w),null,{default:t(()=>[f.value?(i(),h(l(M),{key:1,style:{width:"100%",height:"10vh"},title:"获取预览失败",type:"error"})):(i(),I("img",{style:{width:"100%",height:"10vh"},src:r.value,key:r.value},null,8,ae))]),_:1})]),_:1})]),e(l(C)),e(l(b),{class:"inline-block",type:"primary",onClick:y,size:"small"},{default:t(()=>[e(l(L),null,{default:t(()=>[e(l(T))]),_:1}),k(" 播放 ")]),_:1}),e(l(b),{class:"inline-block",type:"primary",onClick:a,size:"small"},{default:t(()=>[e(l(L),null,{default:t(()=>[e(l(U))]),_:1}),k(" 暂停 ")]),_:1})]),_:1})]))}});const le=N(te,[["__scopeId","data-v-8ac3a82d"]]),ne=o=>(Q("data-v-7412439f"),o=o(),W(),o),se=ne(()=>g("div",{style:{padding:"15px"}}," 播放管理系统 ",-1)),oe={class:"grid-content"},ce=S({__name:"Layout",setup(o){const u=p([]),m=(a,d)=>{if(a){if(u.value.find(n=>n.id===d))return;u.value.push({id:d,el:a})}},r=()=>{u.value.forEach(a=>{a.el.play()})},f=()=>{u.value.forEach(a=>{a.el.pause()})},_=p([]);B(async()=>{y(),setInterval(async()=>{y()},8e3)});const v=p([]),y=()=>{ee().then(a=>{_.value=a}).catch(a=>{_.value=[]})};return J(_,(a,d)=>{const n=a.map(s=>({ip:s.ipaddress,name:s.name}));v.value=n}),(a,d)=>{const n=c("el-header"),s=c("el-button"),E=c("el-divider"),P=c("el-empty"),V=c("el-col"),$=c("el-row"),z=c("el-main"),R=c("el-container");return i(),h(R,null,{default:t(()=>[e(n,null,{default:t(()=>[se]),_:1}),e(z,null,{default:t(()=>[e(s,{type:"primary",style:{"margin-bottom":"20px"},onClick:r},{default:t(()=>[k("全部播放")]),_:1}),e(s,{type:"primary",style:{"margin-bottom":"20px"},onClick:f},{default:t(()=>[k("全部暂停")]),_:1}),e(E),_.value.length===0?(i(),h(P,{key:0})):(i(),h($,{key:1,gutter:20,type:"flex"},{default:t(()=>[(i(!0),I(O,null,K(v.value,(x,A)=>(i(),h(V,{style:{height:"100%"},xs:24,sm:12,md:8,lg:6,xl:6,key:A},{default:t(()=>[g("div",oe,[e(le,{ref_for:!0,ref:D=>m(D,x.ip),name:x.name,ip:x.ip},null,8,["name","ip"])])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})}}});const ue=N(ce,[["__scopeId","data-v-7412439f"]]);export{ue as default};
